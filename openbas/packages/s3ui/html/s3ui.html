<template name="s3plot">
    {{> s3plot_plotStyles}}
    <style class="dynamicStyles">
    </style>
    <!-- This is where <body> started in the original HTML document. -->
    <h1 class="mainTitle">sMAP Plotting Tool</h1>
    <h2 class="graphTitle">Graph</h2>
    {{> s3plot_graphExport}}
    <table>
        <tr>
            <td>
                {{> s3plot_chart}}
            </td>
            <td>
                <div>
                    {{> s3plot_streamLegend}}
                    {{> s3plot_axisLegend}}
                </div>
            </td>
        </tr>
    </table>
    <br>
    <button class="plotButton">Apply all Settings and Plot Data</button>
    <button class="resetZoom">Reset Zoom</button>
    <span class="plotLoading"></span> <!-- Displays details about how the plot is loading -->
    <div>
        <span class="settingsTitle">
            <h2 style="display: inline-block;">Settings</h2>
            &nbsp;&nbsp;&nbsp;
        </span>
        {{> s3plot_automaticUpdate}}
    </div>
    {{> s3plot_timeSelection}}
    {{> s3plot_streamSelection}}
</template>

<template name="s3plot_plotStyles">
    <style class="plotStyles">
        polyline.streamRange {
            fill: inherit;
            fill-opacity: inherit;
            stroke: none;
        }
        polyline.streamMean {
            fill: none;
            stroke: inherit;
            stroke-opacity: 1;
            stroke-width: inherit;
        }
        rect.scrollDisabled {
            visiblity: hidden;
        }
        path, line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }
        text.title {
            font-size: 20px;
        }
        text.label {
            font-size: 12px;
        }
        g.tick text {
            font-size: 16px;
        }
        g.data-density-axis text {
            font-size: 14px;
        }
    </style>
</template>

<template name="s3plot_graphExport">
    <div class="graphExport">
        <button class="makeGraph">Export Current Graph to SVG Image</button>
        <span class="download-graph"></span>
    </div>
</template>

<template name="s3plot_chart">
    <svg class="chart" width="800" height="430" background="white">
        <rect width="800" height="430" fill="white"></rect> <!-- So the background is white, not transparent. -->
        <g class="plotDirections" transform="translate(50, 100)">
            <text transform="translate(0, 0)">1. Select streams from the list below.</text>
            <text transform="translate(0, 30)">2. Select a time range to load data.</text>
            <text transform="translate(0, 60)">3. If desired, change axis settings using the box to the right.</text>
            <text transform="translate(0, 90)">4. Click "Apply all Settings and Plot Data" to see the graph.</text>
            <text transform="translate(0, 120)">5. Use the mouse to zoom and scroll.</text>
            <text transform="translate(0, 150)">
                                        6. Optional: Change the display settings. If new streams are added or the time
                <tspan x="0" dy="1.2em">range is changed, the "Apply all Settings and Plot Data" must be clicked. All</tspan>
                <tspan x="0" dy="1.2em">other changes (removing streams, changing axes, etc.) will be applied</tspan>
                <tspan x="0" dy="1.2em">immediately by default.</tspan>
            </text>
        </g>
    </svg>
</template>

<template name="s3plot_streamLegend">
    <div class="streamLegend outline">
        <h3>Legend</h3>
        <table>
            <tbody class="legend"></tbody>
        </table>
    </div>
</template>

<template name="s3plot_axisLegend">
    <div class="axisLegend outline">
        <h3>Axes</h3>
        <button class="addAxis">Add a Y-Axis</button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Streams</th>
                    <th>Units</th>
                </tr>
            </thead>
            <tbody class="axes"></tbody>
        </table>
    </div>
</template>

<template name="s3plot_automaticUpdate">
    <span class="automaticUpdate">
        <input type="checkbox" class="automaticAxisSetting" checked />
        <span>Automatically apply stream removals and changes to axis settings</span>
    </span>
</template>


<template name="s3plot_timeSelection">
    <div class="timeSelection">
        <h3>Select Time Range</h3>
        <div class="timeselect">
            Start:
            <input type="text" class="datefield startdate" />
            &nbsp;&nbsp;End:
            <input type="text" class="datefield enddate" />
            <button class="nowButton">Now</button>
            &nbsp;&nbsp;Timezone:
            <select class="timezoneSelect">
                <option value="America/Los_Angeles">America/Los_Angeles</option>
                <option value="UTC">UTC</option>
                <option value="OTHER">Other:</option>
            </select>
            <input type="text" class="otherTimezone" style="visibility: hidden;" />
        </div>
    </div>
</template>

<template name="s3plot_streamSelection">
    <div class="streamSelection">
        <h3>Select Streams</h3>
        <button class="updateStreamList">Refresh Stream Tree</button>
        <div class="streamTree"></div>
    </div>
</template>
