<template name="s3plot">
    <style>
        .outline {
            border: 1px solid black;
        }
        td.checkboxlabel {
            font-weight: bold;
        }
        input.datefield {
            width: 200px;
        }
        input.axisname {
            width: 75px;
        }
        input.axisrange {
            width: 50px;
        }
        td.axisrangeselect {
            text-align: right;
        }
        svg#chart {
            font-size: 16px;
            font-family: serif;
        }
    </style>
    <style id="plotStyles">
        polyline.streamRange {
            fill: inherit;
            fill-opacity: inherit;
            stroke: none;
        }

        polyline.streamMean {
            fill: none;
            stroke: inherit;
            stroke-opacity: 1;
            stroke-width: inherit;
        }
        rect#clickscreen {
            pointer-events: visibleFill;
        }

        rect.scrollDisabled {
            visiblity: hidden;
        }

        .unclickedchart {
            cursor: url(packages/s3ui/img/openhand.cur), move;
        }

        .clickedchart {
            cursor: url(packages/s3ui/img/closedhand.cur), move;
        }

        path, line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        text.title {
            font-size: 20px;
        }
        
        text.label {
            font-size: 12px;
        }
        
        g.tick text {
            font-size: 16px;
        }
    </style>

    <!-- This is where <body> started in the original HTML document. -->
    <h1>sMAP Plotting Tool</h1>
    <h2>Graph</h2>
    <button id="makeGraph">Export Current Graph to SVG Image</button>
    <span id="download-graph"></span>
    <table>
        <tr>
            <td>
                <!-- Chart is built in this SVG element by the initPlot() function -->
                <svg id="chart" width="800" height="420" background="white">
                    <rect width="800" height="420" fill="white"></rect> <!-- So the background is white, not transparent. -->
                    <g id="plotDirections" transform="translate(50, 100)">
                        <text transform="translate(0, 0)">1. Select streams from the list below.</text>
                        <text transform="translate(0, 30)">2. Select a time range to load data.</text>
                        <text transform="translate(0, 60)">3. If desired, change axis settings using the box to the right.</text>
                        <text transform="translate(0, 90)">4. Click "Apply all Settings and Plot Data" to see the graph.</text>
                        <text transform="translate(0, 120)">5. Use the mouse to zoom and scroll.</text>
                        <text transform="translate(0, 150)">
                                                    6. Optional: Change the display settings. If new streams are added or the time
                            <tspan x="0" dy="1.2em">range is changed, the "Apply all Settings and Plot Data" must be clicked. All</tspan>
                            <tspan x="0" dy="1.2em">other changes (removing streams, changing axes, etc.) will be applied</tspan>
                            <tspan x="0" dy="1.2em">immediately by default.</tspan>
                        </text>
                    </g>
                </svg>
            </td>
            <td>
                <table>
                    <tr>
                        <td class="outline">
                            <h3>Legend</h3>
                                <table>
                                    <tbody id="legend"></tbody>
                                </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="outline">
                            <h3>Axes</h3>
                            <button id="addAxis">Add a Y-Axis</button>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Streams</th>
                                        <th>Units</th>
                                    </tr>
                                </thead>
                                <tbody id="axes"></tbody>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <br>
    <button id="plotButton">Apply all Settings and Plot Data</button>
    <button id="resetZoom">Reset Zoom</button>
    <span id="plotLoading"></span> <!-- Displays details about how the plot is loading -->
    <div>
        <h2 style="display: inline-block;">Settings</h2>
        &nbsp;&nbsp;&nbsp;
        <span>
            <input type="checkbox" id="automaticAxisSetting" checked />
            <span>Automatically apply stream removals and changes to axis settings</span>
        </span>
    </div>
    <h3>Select Time Range</h3>
    <div id="timeselect">
        Start:
        <input type="text" class="datefield" id="startdate" />
        &nbsp;&nbsp;End:
        <input type="text" class="datefield" id="enddate" />
        <button id="nowButton">Now</button>
        &nbsp;&nbsp;Timezone:
        <select id="timezoneSelect">
            <option value="America/Los_Angeles">America/Los_Angeles</option>
            <option value="UTC">UTC</option>
            <option value="OTHER">Other:</option>
        </select>
        <input type="text" id="otherTimezone" style="visibility: hidden;" />
    </div>
    <h3>Select Streams</h3>
    <button id="updateStreamList">Refresh Stream Tree</button>
    <span id="streamLoading"></span> <!-- Displays details about how the streams are loading -->
    <div id="streamTree"></div>
</template>
